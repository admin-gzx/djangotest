{% extends "base.html" %}

{% block title %}{{ product.name }} - 淘多多电商平台{% endblock %}

{% block content %}
    <div class="row">
        <!-- 商品图片 -->
        <div class="col-md-6">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
            {% else %}
                <img src="https://picsum.photos/600/400?random={{ product.id }}" class="img-fluid rounded" 
                     alt="{{ product.name }}">
            {% endif %}
        </div>

        <!-- 商品信息 -->
        <div class="col-md-6">
            <h1 class="mb-3">{{ product.name }}</h1>
            
            <div class="mb-3">
                {% if product.category and product.category.slug %}
                <a href="{% url 'product_list_by_category' product.category.slug %}" 
                   class="badge bg-secondary text-decoration-none">
                    {{ product.category.name }}
                </a>
                {% endif %}
            </div>

            <div class="mb-4">
                {% if product.discount_price %}
                    <span class="text-danger fs-3">¥{{ product.discount_price }}</span>
                    <span class="text-muted text-decoration-line-through ms-2 fs-4">¥{{ product.price }}</span>
                {% else %}
                    <span class="text-danger fs-3">¥{{ product.price }}</span>
                {% endif %}
            </div>

            <div class="mb-4">
                <p class="text-muted">
                    {% if product.stock > 0 %}
                        <i class="fas fa-check text-success"></i> 有货 (库存: {{ product.stock }})
                    {% else %}
                        <i class="fas fa-times text-danger"></i> 缺货
                    {% endif %}
                </p>
            </div>

            <div class="mb-4">
                <h5>商品描述</h5>
                <p>{{ product.description|linebreaks }}</p>
            </div>

            <div class="d-flex gap-3">
                {% if product.stock > 0 %}
                    <a href="{% url 'cart_add' product.id %}" class="btn btn-primary">
                        <i class="fas fa-shopping-cart me-1"></i> 加入购物车
                    </a>
                {% else %}
                    <button class="btn btn-secondary" disabled>暂时缺货</button>
                {% endif %}
                <a href="{% url 'product_list' %}" class="btn btn-outline-secondary">返回列表</a>
            </div>
        </div>
    </div>
{% endblock %}